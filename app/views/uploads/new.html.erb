<%= filepicker_js_include_tag %>
<%= content_tag :div, class: "filepicker_info", data: { api_key: @filepicker_api_key } do %>
<% end %>

<div class="mic-image-inverse">

  <!-- Reveal Modals begin -->
  <%= content_tag "div", id: "songInfoModal", class: "reveal-modal medium", data: { reveal: true } do %>
    
    <h1>Song Import</h1>
    <p>We could not find a match because of missing or incorrect information in the mp3 file.  Please review the information below and make sure all information is correct.</p>
    <form data-abide id='songInfoForm'> 
      <fieldset>
        <div class="small-3 columns">
          <label for="title" class="right">Title</label>
        </div>
        <div class="small-9 columns">
          <input id="title" type="text" />
        </div>

        <div class="small-3 columns">
          <label for="artist" class="right">Artist</label>
        </div>
        <div class="small-9 columns">
          <input id="artist" type="text" />
        </div>

        <div class="small-3 columns">
          <label for="album" class="right">Album</label>
        </div>
        <div class="small-9 columns">
          <input id="album" type="text" />
        </div>

      </fieldset>
      
      <div class="row">
        <div class="small-6 small-offset-3">
          <div id='id3Submit' class="button expand">Info is Correct</div>
        </div>
      </div>
    </form>
  <% end %>

  <%= content_tag "div", id: "chooseMatch", class: "reveal-modal medium", data: { reveal: true } do %>
    <h1>Cannot Match Song</h1>
    <p>Please choose the song from the list of matches</p>
    <p>Your File Info:</p>
    <p>Filename: <b class="filenameDisplay"></b><br>
    <p>Title: <b class="titleDisplay"></b><br>
    <p>Artist: <b class="artistDisplay"></b>

    <form data-abide id='chooseID'>
      
      <div id="chooseSongContainer">
        <table id="chooseSongTable">
          <thead>
            <tr>
              <th></th>
              <th>Artist</th>
              <th>Title</th>
            </tr>
          </thead>
          <tbody>

            <!-- Possible Matches Inserted by JS Here -->

          </tbody>
        </table>
      </div>

      <div class="row">
        <div class="small-9 small-offset-3 columns">
          <input type="radio" name="songSelect" value="ECHONESTIDNOTFOUND" id="songSelect" />
          <label for="songSelect"><b>None of these are matches</b></label>
        </div>
      </div>

      <div class="row">
        <div class="large-12 large-centered columns">
          <ul class="button-group even-2">
            <li><a href='#' class="button" id="addSongByEchonestIdButton">Add Song</a></li>
            <li><a href='#' class="button" id="cancelAddSongButton">Cancel</a></li>
          </ul>
        </div>
      </div>
    </form>
  <% end %>



  <div class="row top-row">
    <div class="small-8 small-offset-4 columns">
      <div class="row">
        <div class="small-8 columns">
          <h1 class="title">Upload Songs</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="small-5 columns">
      <fieldset id="catalog-fieldset">
        <legend>Current Catalog</legend>
        <label for="searchbox">Search Text:</label>
        <input type="text" id="searchbox" />

        <ul id="catalog-list">
          <% @all_songs.each do |song| %>
            <li data-searchString= "<%= song.title + ' ' + song.artist %>">
              <span class="songlist-title"><%= song.title %></span>
              <span class="songlist-artist"><%= song.artist %></span>
            </li>
          <% end %> 
        </ul>
      </fieldset>
    </div>
    <div class="small-7 columns">
      <fieldset>
        <legend>Uploads</legend>
        <div class="row">
          <input id="filepicker" type="filepicker-dragdrop" data-fp-drag-class="small-9 columns drag-area" data-fp-extensions=".mp3,.wav" data-fp-button-class="small-2 column button filepicker-button" data-fp-multiple="true" data-fp-button-text="Pick Mp3s" data-fp-drag-text="Or Drop Them Here" data-fp-services="COMPUTER, DROPBOX, GMAIL" data-fp-store-location="S3"/>
        </div>
        <div class="row">
          <div id="uploaded-song-list">
          </div>
        </div>
      </fieldset>
    </div>
  </div>
</div>